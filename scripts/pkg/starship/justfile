# starship å¥—ä»¶ç®¡ç†
# ä½¿ç”¨æ–¹æ³•: just <task_name>

# é è¨­ä»»å‹™ï¼šé¡¯ç¤ºå¯ç”¨ä»»å‹™
default:
    @echo "ğŸ“¦ starship å¥—ä»¶ç®¡ç†"
    @echo "=========================="
    @echo ""
    @echo "å¯ç”¨ä»»å‹™ï¼š"
    @echo "  ğŸ” check    - æª¢æŸ¥æ˜¯å¦å·²å®‰è£"
    @echo "  ğŸ“¦ install  - åŸ·è¡Œå®‰è£"
    @echo ""
    @echo "ä½¿ç”¨æ–¹æ³•: just <task_name>"

# æª¢æŸ¥æ˜¯å¦å·²å®‰è£
check:
    #!/usr/bin/env bash
    echo "ğŸ” æª¢æŸ¥ starship å®‰è£ç‹€æ…‹..."
    if command -v starship &> /dev/null; then \
        echo "âœ… starship å·²å®‰è£ï¼Œç‰ˆæœ¬: $(starship --version 2>/dev/null || echo "å·²å®‰è£")"; \
    else \
        echo "âŒ starship å°šæœªå®‰è£"; \
    fi

# åŸ·è¡Œå®‰è£
install:
    #!/usr/bin/env bash
    echo "ğŸš€ åŸ·è¡Œ starship å®‰è£..."
    just _do_install
    echo "âœ… starship å®‰è£å®Œæˆ"


# å…§éƒ¨å®‰è£é‚è¼¯
_do_install:
    #!/usr/bin/env bash
    curl -sS https://starship.rs/install.sh | sh

    echo "" >> ~/.zshrc
    echo "# starship" >> ~/.zshrc
    echo 'eval "$(starship init zsh)"' >> ~/.zshrc

    cat <<'EOF' > ./starship.toml
command_timeout = 10000

[aws]
format = '\[[$symbol($profile)(\($region\))(\[$duration\])]($style)\]'

[bun]
format = '\[[$symbol($version)]($style)\]'

[c]
format = '\[[$symbol($version(-$name))]($style)\]'

[cmake]
format = '\[[$symbol($version)]($style)\]'

[cmd_duration]
format = '\[[â± $duration]($style)\]'

[cobol]
format = '\[[$symbol($version)]($style)\]'

[conda]
format = '\[[$symbol$environment]($style)\]'

[crystal]
format = '\[[$symbol($version)]($style)\]'

[daml]
format = '\[[$symbol($version)]($style)\]'

[dart]
format = '\[[$symbol($version)]($style)\]'

[deno]
format = '\[[$symbol($version)]($style)\]'

[docker_context]
format = '\[[$symbol$context]($style)\]'

[dotnet]
format = '\[[$symbol($version)(ğŸ¯ $tfm)]($style)\]'

[elixir]
format = '\[[$symbol($version \(OTP $otp_version\))]($style)\]'

[elm]
format = '\[[$symbol($version)]($style)\]'

[erlang]
format = '\[[$symbol($version)]($style)\]'

[gcloud]
format = '\[[$symbol$account(@$domain)(\($region\))]($style)\]'

[git_branch]
format = '\[[$symbol$branch]($style)\]'

[git_status]
format = '([\[$all_status$ahead_behind\]]($style))'

[golang]
format = '\[[$symbol($version)]($style)\]'

[haskell]
format = '\[[$symbol($version)]($style)\]'

[helm]
format = '\[[$symbol($version)]($style)\]'

[hg_branch]
format = '\[[$symbol$branch]($style)\]'

[java]
format = '\[[$symbol($version)]($style)\]'

[julia]
format = '\[[$symbol($version)]($style)\]'

[kotlin]
format = '\[[$symbol($version)]($style)\]'

[kubernetes]
format = '\[[$symbol$context( \($namespace\))]($style)\]'

[lua]
format = '\[[$symbol($version)]($style)\]'

[memory_usage]
format = '\[$symbol[$ram( | $swap)]($style)\]'

[nim]
format = '\[[$symbol($version)]($style)\]'

[nix_shell]
format = '\[[$symbol$state( \($name\))]($style)\]'

[nodejs]
format = '\[[$symbol($version)]($style)\]'

[ocaml]
format = '\[[$symbol($version)(\($switch_indicator$switch_name\))]($style)\]'

[openstack]
format = '\[[$symbol$cloud(\($project\))]($style)\]'

[package]
format = '\[[$symbol$version]($style)\]'

[perl]
format = '\[[$symbol($version)]($style)\]'

[php]
format = '\[[$symbol($version)]($style)\]'

[pulumi]
format = '\[[$symbol$stack]($style)\]'

[purescript]
format = '\[[$symbol($version)]($style)\]'

[python]
format = '\[[${symbol}${pyenv_prefix}(${version})(\($virtualenv\))]($style)\]'

[raku]
format = '\[[$symbol($version-$vm_version)]($style)\]'

[red]
format = '\[[$symbol($version)]($style)\]'

[ruby]
format = '\[[$symbol($version)]($style)\]'

[rust]
format = '\[[$symbol($version)]($style)\]'

[scala]
format = '\[[$symbol($version)]($style)\]'

[spack]
format = '\[[$symbol$environment]($style)\]'

[sudo]
format = '\[[as $symbol]\]'

[swift]
format = '\[[$symbol($version)]($style)\]'

[terraform]
format = '\[[$symbol$workspace]($style)\]'

[time]
disabled = false
format = '\[[$time]($style)\]'

[username]
format = '\[[$user]($style)\]'

[vagrant]
format = '\[[$symbol($version)]($style)\]'

[vlang]
format = '\[[$symbol($version)]($style)\]'

[zig]
format = '\[[$symbol($version)]($style)\]'
EOF