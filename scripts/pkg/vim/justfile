# vim å¥—ä»¶ç®¡ç†
# ä½¿ç”¨æ–¹æ³•: just <task_name>

# é è¨­ä»»å‹™ï¼šé¡¯ç¤ºå¯ç”¨ä»»å‹™
default:
    @echo "ğŸ“¦ vim å¥—ä»¶ç®¡ç†"
    @echo "=========================="
    @echo ""
    @echo "å¯ç”¨ä»»å‹™ï¼š"
    @echo "  ğŸ” check    - æª¢æŸ¥æ˜¯å¦å·²å®‰è£"
    @echo "  ğŸ“¦ install  - åŸ·è¡Œå®‰è£"
    @echo ""
    @echo "ä½¿ç”¨æ–¹æ³•: just <task_name>"

# æª¢æŸ¥æ˜¯å¦å·²å®‰è£
check:
    #!/usr/bin/env bash
    echo "ğŸ” æª¢æŸ¥ vim å®‰è£ç‹€æ…‹..."
    if command -v vim &> /dev/null; then \
        echo "âœ… vim å·²å®‰è£ï¼Œç‰ˆæœ¬: $(vim --version | head -n1)"; \
    else \
        echo "âŒ vim å°šæœªå®‰è£"; \
    fi

# åŸ·è¡Œå®‰è£
install:
    #!/usr/bin/env bash
    echo "ğŸš€ åŸ·è¡Œ vim å®‰è£..."
    just _do_install
    echo "âœ… vim å®‰è£å®Œæˆ"


# å…§éƒ¨å®‰è£é‚è¼¯
_do_install:
    #!/usr/bin/env bash
    # æ›´æ–°å¥—ä»¶æ¸…å–®
    echo "ğŸ”„ æ›´æ–°å¥—ä»¶æ¸…å–®..."
    sudo apt update

    # å®‰è£ vim
    echo "ğŸ“¦ å®‰è£ vim..."
    if sudo apt install -y vim; then
        echo "âœ… vim å®‰è£æˆåŠŸ"
        vim --version | head -n1
    else
        echo "âŒ vim å®‰è£å¤±æ•—"
        exit 1
    fi